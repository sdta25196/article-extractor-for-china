<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    // ! 文案在内置pdf中，需要搞到iframe完整的html才行 - 一般会在iframe里，获取iframe里的地址文件即可
    // const url = 'https://physics.nju.edu.cn/xwgg/gg/20230404/i242037.html'
    // const url = 'https://zs.jmi.edu.cn/3c/5e/c1702a80990/page.htm'
    // ! 文案非常短的，默认提取不到. contentLengthThreshold 设置小一些就可以。但是会出现误差。
    // ! title 中的标题不正确
    // const url = 'https://xsxy.nju.edu.cn/jyjx/rcpy/20201126/i170797.html'
    // ! 全是 table 的
    // const url = 'https://bmf.sumhs.edu.cn/1c/98/c3460a269464/page.htm'
    // ! 标题带短横杠的
    // const url = 'http://dlkx.hrbnu.edu.cn/info/1049/1325.htm'

    // !内容是一张图片 识别有问题！！！！ - 可以利用是否符合页面抓取来避开这类网页
    // const url = 'https://www.shupl.edu.cn/jjfxy/2022/0929/c4267a115621/page.htm'
    // const url = 'https://www.whzkb.cn/#/detail?pageid=1652&typeid=5'

    // !内容是加密的 识别有问题！！！！！
    // const url = 'https://www.jxmtc.com/info/1041/9943.htm'
    // ! gbk 编码的
    // const url = 'http://www.acac.cn/index.php?m=content&c=index&a=show&catid=41&id=4679'
    // ! 微信公众号
    // const url = 'https://mp.weixin.qq.com/s/EnaYPZi7fX0kZoPP4VVNWA'
    // ! 阮一峰
    // const url = 'https://www.ruanyifeng.com/blog/2023/04/weekly-issue-249.html'
    // ! 常规
    // const url = 'https://news.nju.edu.cn/zhxw/20230404/i112453.html'

    function search() {
      const v = document.querySelector("#url").value
      fetch('http://localhost:3000/extract?url=' + v).then(res => res.json()).then(res => {
        console.log(res)
        if (res.error === 0) {
          document.querySelector('.loadTime').innerText = res.data.loadTime + 'ms'
          document.querySelector('.parseTime').innerText = res.data.parseTime + 'ms'
          document.querySelector('.title').innerText = res.data.title || 'null'
          document.querySelector('.author').innerText = res.data.author || 'null'
          document.querySelector('.site').innerText = res.data.siteName || 'null'
          document.querySelector('.length').innerText = res.data.length || 'null'
          document.querySelector('.content').innerText = res.data.textContent | 'null'
        } else {
          alert(res.message)
        }
      })
    }
  </script>
  <style>
    .handleBox {
      text-align: center;
    }

    #url {
      width: 300px;
      margin-top: 20px;
    }

    h2 {
      margin-top: 0;
    }

    p {
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 1px solid #ccc;
    }

    p span {
      display: inline-block;
      margin-left: 20px;
      color: red;
      padding: 5px 10px;
    }
  </style>
</head>

<body>
  <div class="handleBox">
    URL：<input type="text" id="url">&nbsp;&nbsp;&nbsp;&nbsp;
    <button type="button" onclick="search()">提取</button>
  </div>
  <div>
    <h2>提取结果</h2>
    <p>
      加载时间:<span class="loadTime"></span>&nbsp;&nbsp;&nbsp;&nbsp;
      解析时间:<span class="parseTime"></span>&nbsp;&nbsp;&nbsp;&nbsp;
      文章地址:<span class="site"></span>
    </p>
    <p>文章标题:<span class="title"></span></p>
    <p>文章作者:<span class="author"></span>&nbsp;&nbsp;&nbsp;&nbsp;内容长度:<span class="length"></span></p>
    <p>文章内容:<span class="content"></span></p>
  </div>
</body>

</html>